{
  "name": "DevContainer Features",
  "dockerComposeFile": "docker-compose.yaml",
  "service": "devcontainer-features",
  "workspaceFolder": "/workspaces/${localWorkspaceFolderBasename}",
  // https://aka.ms/dev-containers-non-root.
  "remoteUser": "vscode",
  "userEnvProbe": "loginInteractiveShell",
  // https://code.visualstudio.com/remote/advancedcontainers/environment-variables
  "containerEnv": {},
  "remoteEnv": {},
  // https://code.visualstudio.com/remote/advancedcontainers/add-local-file-mount
  "mounts": [],
  "forwardPorts": [
    11080,
    11901
  ],
  "portsAttributes": {
    "11080": {
      "label": "Web Desktop",
      "protocol": "http"
    },
    "11901": {
      "label": "VNC",
      "protocol": "http"
    }
  },
  // https://code.visualstudio.com/remote/advancedcontainers/start-processes
  // https://containers.dev/implementors/json_reference/#lifecycle-scripts
  "initializeCommand": [ ".devcontainer/init" ],
  "updateContentCommand": [ "/bin/zsh", "-l", "-c", "./run events update-content" ],
  "onCreateCommand": [ "/bin/zsh", "-l", "-c", "./run events on-create" ],
  "postCreateCommand": [ "/bin/zsh", "-l", "-c", "./run events post-create" ],
  "postStartCommand": [ "/bin/zsh", "-l", "-c", "./run events post-start" ],
  "postAttachCommand": "nohup bash -l -c './run events post-attach &'",
  "customizations": {
    "vscode": {
      "settings": {
        "terminal.integrated.profiles.linux": {
          "zsh": {
            "path": "zsh",
            "args": [
              "-l"
            ]
          }
        },
        "terminal.integrated.defaultProfile.linux": "zsh",
        "json.schemas": [
          {
            "fileMatch": [
              "*/devcontainer-feature.json"
            ],
            "url": "https://raw.githubusercontent.com/devcontainers/spec/main/schemas/devContainerFeature.schema.json"
          }
        ]
      },
      "extensions": [
        "editorconfig.editorconfig",
        "hilleer.yaml-plus-json",
        "rogalmic.zsh-debug",
        "rogalmic.bash-debug",
        "shakram02.bash-beautify",
        "lizebang.bash-extension-pack",
        "rechinformatica.rech-editor-batch",
        "dbaeumer.vscode-eslint",
        "dotenv.dotenv-vscode",
        "VisualStudioExptTeam.vscodeintellicode",
        "donjayamanne.githistory",
        "eamodio.gitlens",
        "donjayamanne.git-extension-pack",
        "ms-vscode-remote.remote-containers",
        "ms-vscode.powershell",
        "ms-vscode.vscode-node-azure-pack",
        "ms-vscode.azurecli",
        "ms-vscode.cpptools",
        "ms-vscode.cpptools-extension-pack",
        "ms-dotnettools.csharp",
        "ms-python.python",
        "ms-mssql.mssql",
        "donjayamanne.python-extension-pack",
        "ms-azuretools.vscode-docker",
        "ms-azuretools.vscode-cosmosdb",
        "ms-azuretools.vscode-azurefunctions",
        "ms-azuretools.vscode-azureterraform",
        "msazurermtools.azurerm-vscode-tools",
        "ms-kubernetes-tools.vscode-aks-tools",
        "mindaro.mindaro",
        "ms-kubernetes-tools.kind-vscode",
        "inercia.vscode-k3d",
        "ms-ossdata.vscode-postgresql",
        "uniquevision.vscode-plpgsql-lsp",
        "bradymholt.pgformatter",
        "golang.go",
        "rebornix.ruby",
        "amazonwebservices.aws-toolkit-vscode",
        "gitHub.codespaces",
        "gitHub.vscode-pull-request-github",
        "gitHub.remotehub",
        "gitHub.copilot-nightly",
        "gitHub.copilot-labs",
        "github.vscode-github-actions",
        "github.codespaces",
        "github.vscode-pull-request-github",
        "github.remotehub",
        "github.copilot-nightly",
        "github.copilot-labs",
        "github.vscode-github-actions"
      ]
    }
  },
  "features": {
    // https://github.com/devcontainers-contrib/features/tree/main/src/bash-command
    "ghcr.io/AlephZ-ai/devcontainer-features/sudo-command:1": {
      "command": "/devspaces/devcontainer/scripts/setup/devspace/post-build-sudo.sh"
    },
    // https://github.com/devcontainers/features/tree/main/src/common-utils
    "ghcr.io/devcontainers/features/common-utils:2": {
      "installZsh": "true",
      "configureZshAsDefaultShell": "true",
      "installOhMyZsh": "true",
      "username": "automatic",
      "userUid": "automatic",
      "userGid": "automatic",
      "nonFreePackages": "true"
    },
    // https://github.com/devcontainers/features/tree/main/src/docker-in-docker
    "ghcr.io/devcontainers/features/docker-in-docker:2": {
      "version": "latest",
      "moby": "true",
      "dockerDashComposeVersion": "v2",
      "azureDnsAutoDetection": "true",
      "enableNonRootDocker": "true",
      "installDockerBuildx": "true"
    },
    // https://github.com/devcontainers-contrib/features/tree/main/src/bash-command
    "ghcr.io/AlephZ-ai/devcontainer-features/user-command:1": {
      "command": "/devspaces/devcontainer/scripts/setup/devspace/post-build-user.sh"
    },
    // https://github.com/devcontainers/features/tree/main/src/desktop-lite
    "ghcr.io/devcontainers/features/desktop-lite:1": {
      "version": "latest",
      "noVncVersion": "1.4.0",
      "password": "vscode",
      "webPort": 11080,
      "vncPort": 11901
    }
  },
  "overrideFeatureInstallOrder": [
    "ghcr.io/AlephZ-ai/devcontainer-features/sudo-command",
    "ghcr.io/devcontainers/features/common-utils",
    "ghcr.io/devcontainers/features/docker-in-docker",
    "ghcr.io/AlephZ-ai/devcontainer-features/user-command",
    "ghcr.io/devcontainers/features/desktop-lite"
  ]
}
