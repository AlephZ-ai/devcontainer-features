{
  "name": "DevContainer Features",
  "dockerComposeFile": "docker-compose.yaml",
  "service": "devcontainer-features",
  "workspaceFolder": "/workspaces/${localWorkspaceFolderBasename}",
  // https://aka.ms/dev-containers-non-root.
  "remoteUser": "vscode",
  "userEnvProbe": "loginInteractiveShell",
  // https://code.visualstudio.com/remote/advancedcontainers/environment-variables
  "containerEnv": {},
  "remoteEnv": {},
  // https://code.visualstudio.com/remote/advancedcontainers/add-local-file-mount
  "mounts": [],
  "forwardPorts": [
    11080,
    11901
  ],
  "portsAttributes": {
    "11080": {
      "label": "Web Desktop",
      "protocol": "http"
    },
    "11901": {
      "label": "VNC",
      "protocol": "http"
    }
  },
  // https://code.visualstudio.com/remote/advancedcontainers/start-processes
  // https://containers.dev/implementors/json_reference/#lifecycle-scripts
  "initializeCommand": [
    ".devcontainer/init"
  ],
  "updateContentCommand": [
    "/bin/zsh",
    "-l",
    "-c",
    "./run events update-content"
  ],
  "onCreateCommand": [
    "/bin/zsh",
    "-l",
    "-c",
    "./run events on-create"
  ],
  "postCreateCommand": [
    "/bin/zsh",
    "-l",
    "-c",
    "./run events post-create"
  ],
  "postStartCommand": [
    "/bin/zsh",
    "-l",
    "-c",
    "./run events post-start"
  ],
  "postAttachCommand": "nohup bash -c './run events post-attach &'",
  "customizations": {
    "vscode": {
      "settings": {
        "terminal.integrated.profiles.linux": {
          "zsh": {
            "path": "zsh",
            "args": [
              "-l"
            ]
          }
        },
        "terminal.integrated.defaultProfile.linux": "zsh",
        "json.schemas": [
          {
            "fileMatch": [
              "*/devcontainer-feature.json"
            ],
            "url": "https://raw.githubusercontent.com/devcontainers/spec/main/schemas/devContainerFeature.schema.json"
          }
        ]
      },
      "extensions": [
		"editorconfig.editorconfig",
		"ms-azuretools.vscode-docker",
		"gitHub.codespaces",
		"gitHub.vscode-pull-request-github",
		"gitHub.remotehub",
		"gitHub.copilot-nightly",
		"gitHub.copilot-labs",
		"github.vscode-github-actions",
		"hilleer.yaml-plus-json",
		"ms-vscode-remote.remote-containers",
		"rogalmic.zsh-debug",
		"rogalmic.bash-debug",
		"shakram02.bash-beautify",
		"lizebang.bash-extension-pack",
		"ms-dotnettools.csharp",
		"dbaeumer.vscode-eslint",
		"ms-vscode.powershell",
		"ms-ossdata.vscode-postgresql",
		"ms-azuretools.vscode-cosmosdb",
		"uniquevision.vscode-plpgsql-lsp",
		"bradymholt.pgformatter",
		"ms-azuretools.vscode-azurefunctions",
		"ms-vscode.vscode-node-azure-pack",
		"ms-vscode.azurecli",
		"ms-azuretools.vscode-azureterraform",
		"msazurermtools.azurerm-vscode-tools",
		"ms-kubernetes-tools.vscode-aks-tools",
		"amazonwebservices.aws-toolkit-vscode"
	]
    }
  },
  "features": {
    // https://github.com/rocker-org/devcontainer-features/tree/main/src/apt-packages
    "ghcr.io/rocker-org/devcontainer-features/apt-packages:1": {
      "packages": "sudo,bash,zsh,file,curl,wget,grep,bzip2,fonts-dejavu-core,gcc,g++,git,less,locales,openssl,openssh-client,make,cmake,netbase,patch,tzdata,uuid-runtime,apt-transport-https,ca-certificates,speedtest-cli,checkinstall,dos2unix,shellcheck,procps,software-properties-common,libnss3,libnss3-tools,build-essential,zlib1g-dev,bash-completion,age,powerline,fonts-powerline,jq,moreutils,gedit,gimp,nautilus,vlc,x11-apps",
      "updatePackages": "true"
    },
    // https://github.com/devcontainers/features/tree/main/src/docker-in-docker
    "ghcr.io/devcontainers/features/docker-in-docker:2": {
      "version": "latest",
      "moby": "true",
      "dockerDashComposeVersion": "v2",
      "azureDnsAutoDetection": "true",
      "enableNonRootDocker": "true",
      "installDockerBuildx": "true"
    },
    // https://github.com/devcontainers/features/tree/main/src/common-utils
    "ghcr.io/devcontainers/features/common-utils:2": {
      "installZsh": "true",
      "configureZshAsDefaultShell": "true",
      "installOhMyZsh": "true",
      "username": "automatic",
      "userUid": "automatic",
      "userGid": "automatic",
      "nonFreePackages": "true"
    },
    // https://github.com/AlephZ-ai/devcontainer-features/tree/main/src/homebrew
    "ghcr.io/AlephZ-ai/devcontainer-features/homebrew": {
      "brews": "bash zsh file-formula curl wget grep bzip2 git git-lfs less openssl@1.1 openssl@3 openssh make cmake ca-certificates speedtest-cli dos2unix shellcheck procps nss zlib zlib-ng age jq moreutils gedit asdf sigstore/tap/gitsign gh mkcert chezmoi postgresql@15 azure-cli awscli",
      "links": "postgresql@15"
    },
    // https://github.com/devcontainers/features/tree/main/src/dotnet
    "ghcr.io/AlephZ-ai/devcontainer-features/dotnet": {
      "tools": "git-credential-manager"
    },
    // https://github.com/devcontainers/features/tree/main/src/powershell
    "ghcr.io/devcontainers/features/powershell:1": {
      "version": "latest",
      "modules": "Set-PsEnv,Pester"
    },
    // https://github.com/devcontainers/features/tree/main/src/node
    "ghcr.io/AlephZ-ai/devcontainer-features/nvm": {
      "nodeGypDependencies": "true",
      "packages": "@npmcli/fs,@devcontainers/cli,dotenv-cli"
    },
    // https://github.com/devcontainers/features/tree/main/src/desktop-lite
    "ghcr.io/devcontainers/features/desktop-lite:1": {
      "version": "latest",
      "noVncVersion": "1.2.0",
      "password": "vscode",
      "webPort": 11080,
      "vncPort": 11901
    },
    // https://github.com/devcontainers-contrib/features/tree/main/src/bash-command
    "ghcr.io/AlephZ-ai/devcontainer-features/bash-command:1": {
      "command": "${localEnv:DEVCONTAINER_POST_BUILD_COMMAND}"
    }
  },
  "overrideFeatureInstallOrder": [
    "ghcr.io/rocker-org/devcontainer-features/apt-packages",
    "ghcr.io/devcontainers/features/docker-in-docker",
    "ghcr.io/devcontainers/features/common-utils",
    "ghcr.io/AlephZ-ai/devcontainer-features/homebrew",
    "ghcr.io/AlephZ-ai/devcontainer-features/dotnet",
    "ghcr.io/devcontainers/features/powershell",
    "ghcr.io/AlephZ-ai/devcontainer-features/nvm",
    "ghcr.io/devcontainers/features/desktop-lite",
    "ghcr.io/AlephZ-ai/devcontainer-features/bash-command:1"
  ]
}